<script>

    // -----------------------------------------------------  DECLARACION DE VARIABLES, ARRAYS Y CONSTANTES  --------------------------------------------------------------------------------------

    // Arrays para guardar los recursos de la granja

    let felicidadAnimales = ["â¤ï¸","â¤ï¸"]      // â¤ï¸â¤ï¸â¤ï¸â¤ï¸ (0-4)
    let alimentosDisponibles = ["ğŸŒ¾","ğŸŒ¾"]   // ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾ (0-4)
    let estadoEstablo = ["ğŸ’©","ğŸ’©"]          // ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’© (0-6)
    let iteracionesarray = ["-","-","-"]

    // Variables

    let iteraciones = 0  // ğŸ•’ğŸ•’ğŸ•’ (0-3)
    let aninimales = 0
    let opcionMenuUsuario = 0
    let frutaOForraje = 0
    let cantidadAlimentoComprado = 0

    // Mensajes Constantes

    const MENSAJEMENU = "---------- Menu ----------- \n1. Alimentar animales \n2. Jugar con los animales \n3. Limpiar establo \n4. Comprar comida \n --------- Recursos -------- \n"
    const MENSAJESTABLOMALESTADO = "â—El estado del establo esta muy malâ—\nRecuerda que puedes Limpiarlo con la opcion 3"
    const MENSAJEFALTAALIMENTO = "â—Te falta Alimentosâ— \nRecuerda que puedes comprar mas alimentos con la opcion 4"
    const MENSAJEALMACENLLENO = "â—Su almacen de alimentos esta llenoâ—"
    const MENSAJEFRUTAOFORRAJE = "Quieres alimentarlos con: \n1. FrutağŸ  \n2. ForrajeğŸŒ¾"
    const MENSAJEERRORFRUTAOFORRAJE = "â—Opcion insertada incorrectaâ—\n" + MENSAJEFRUTAOFORRAJE 
    const MENSAJEALIMENTADOEXITO = "Se a alimentado a los animales con exito âœ…"
    const MENSAJELIMIADOEXITO = "Has limpiado su establo con exito âœ…"
    const MENSAJEERRORLIMPIADO = "â—No puedes limpiar tu establo. Ya esta perfectoâ—"
    const MENSAJETRESTURNOS = "Han pasado 3 turnos, tu establo se a ensuciado (+1ğŸ’©)"
    const MENSAJECOMPRAEXITO = "Su compra se a realizado con exito. âœ…"
    const MENSAJEJUGAREXITO = "Has jugado con tus animales con exito âœ… (+1â¤ï¸)(-1ğŸŒ¾)"



    // -----------------------------------------------------  PROGRAMA PRINCIPAL  --------------------------------------------------------------------------------------

    //Creacion de bucle para escoger opciones diferentin que acabe el programa (cada vuelta (+1ğŸ•’) Iteracion) (Actualmente bucle infinito)
    while (aninimales < 99) {

        // Preguntamos al Usuario la opcion que quira del menu
        opcionMenuUsuario = Number(prompt(MENSAJEMENU + "Felicidad: " + felicidadAnimales + "\n" + "Alimentos: "+ alimentosDisponibles + "\n" + "Estado: " + estadoEstablo))

        // Manejo de errores (numero valido entre el 1 y el 4)
        while ((opcionMenuUsuario > 4) || (opcionMenuUsuario < 1) || ((opcionMenuUsuario % 1) != 0))  {
            opcionMenuUsuario = Number(prompt("â—Opcion insertada incorrectaâ— \n" + MENSAJEMENU + "Felicidad: " + felicidadAnimales + "\n" + "Alimentos: "+ alimentosDisponibles + "\n" + "Estado: " + estadoEstablo))
        }   

        // ------------------------------------------------  1. ALIMENTAR  -------------------------------------------------------------

        // Alimentar a los animales (No se puede alimentar con mas de ğŸ’©ğŸ’©ğŸ’©)
            // Alimentras con forraje (-1ğŸŒ¾)
            // Alimentar con ğŸfrutas (-1ğŸŒ¾)(+1â¤ï¸)
        if (opcionMenuUsuario == 1) {

            // Estado esta muy mal
            if (estadoEstablo.length > 3) {
                alert(MENSAJESTABLOMALESTADO)
            }

            // No quedan alimentos
            else if (alimentosDisponibles.length < 1) {
                alert(MENSAJEFALTAALIMENTO)
            }
            
            // Hay suficiente comida y el establo esta limpio
            else{

                // Pedir al Usuario fruta o forraje
                frutaOForraje = Number(prompt(MENSAJEFRUTAOFORRAJE))

                // Manejo de error
                while ((frutaOForraje != 1) && (frutaOForraje != 2))  {
                    frutaOForraje = Number(prompt(MENSAJEERRORFRUTAOFORRAJE))
                
                }

                // Opcion Fruta
                if (frutaOForraje == 1) {
                    
                    alimentosDisponibles.pop()
                    felicidadAnimales.push("â¤ï¸")
                }

                // Opcion Forraje
                else{
                    alimentosDisponibles.pop()
                    
                }

                alert(MENSAJEALIMENTADOEXITO)

            }

        }


        // ------------------------------------------------  2. JUGAR  -------------------------------------------------------------

        // Jugar con animales (No se puede jugar con mas de ğŸ’©ğŸ’©ğŸ’©) / (+1â¤ï¸)(-1ğŸŒ¾)
        else if (opcionMenuUsuario == 2) {

       
            //Jugar con los animales con exito
            if ((estadoEstablo.length <= 3) && (alimentosDisponibles.length > 0)) {

                felicidadAnimales.push("â¤ï¸")
                alimentosDisponibles.pop()

                alert(MENSAJEJUGAREXITO)
            }

            //Jugar con los animales ERROR
            else{

                // Falta limpiar establo
                if (estadoEstablo.length >= 3) {
                    alert(MENSAJESTABLOMALESTADO)
                }

                // Falta alimento
                else{
                    alert(MENSAJEFALTAALIMENTO)
                }
            }

        }

        
        // ------------------------------------------------  3. LIMPIAR  -------------------------------------------------------------


        // Limpiar establo (Elimina todos los ğŸ’© acumulados)
        else if (opcionMenuUsuario == 3) {
            
            // Se limpia el establo
            if (estadoEstablo.length > 0) {

                estadoEstablo = []

                alert(MENSAJELIMIADOEXITO)

            }

            
            // No se puede limpiar el establo
            else{
                alert(MENSAJEERRORLIMPIADO)
            }
        }

        // ------------------------------------------------  4. COMPRAR  -------------------------------------------------------------


        // Comprar comida (Llena los alimentos al maximo ğŸŒ¾)
        else {
            
            // Compra con exito
            if (alimentosDisponibles.length < 4) {

                //Bucle de comprar alimentos
                for (let i = alimentosDisponibles.length; i < 4; i++) {
                    alimentosDisponibles.push("ğŸŒ¾")

                    //Contador de alimentos comprados
                    cantidadAlimentoComprado++
                
                }

                alert(MENSAJECOMPRAEXITO + "(+" + cantidadAlimentoComprado + "ğŸŒ¾)")

                cantidadAlimentoComprado = 0

            }

            // Compra cancelada
            else {
                alert(MENSAJEALMACENLLENO)
            }

        }

        // ------------------------------------------------  ğŸ•’ITERACIONESğŸ•’  -------------------------------------------------------------

        // Si las iteracionesğŸ•’ llegan a 3, se reinicia a 0 y (+1ğŸ’©)(-1â¤ï¸)
        iteraciones++

        if (iteraciones >= 3) {

            if (estadoEstablo.length <= 6) {
                estadoEstablo.push("ğŸ’©")
            }

            felicidadAnimales.pop()

            alert(MENSAJETRESTURNOS)
            
            iteraciones = 0
        }

    }

</script>
